<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="color-scheme" content="dark light" />
  <title>Ben Walker | Mathematics & Machine Learning</title>
  <link rel="stylesheet" href="style.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
  />
</head>
<body>
  <nav>
    <div class="nav-content">
      <div class="logo">BW</div>
      <div class="nav-links">
        <a href="#about">About</a>
        <a href="#research">Research</a>
        <a href="#code">Code</a>
        <a href="#contact">Contact</a>
        <button id="theme-toggle">
          <i class="fas fa-sun"></i>
        </button>
      </div>
    </div>
  </nav>

  <main>
    <!-- Hero -->
    <section id="hero">
      <h1></h1>
      <h5></h5>
      <div class="social-links"></div>
    </section>

    <!-- About -->
    <section id="about">
      <h2>About</h2>
      <div class="about-content">
        <!-- Filled by JS -->
      </div>
    </section>

    <!-- Research -->
    <section id="research">
      <h2>Research</h2>
      <div class="publications">
        <!-- Filled by JS -->
      </div>
    </section>

    <!-- Code -->
    <section id="code">
      <h2>Code</h2>
      <div class="projects">
        <!-- Filled by JS -->
      </div>
    </section>

    <!-- Contact -->
    <section id="contact">
      <h2>Contact</h2>
      <div class="contact-content">
        <p>Feel free to reach out via email or social media.</p>
        <div class="social-links"></div>
      </div>
    </section>
  </main>

  <footer>
    <p>Â© 2024 Ben Walker</p>
    <button id="terminal-mode" onclick="window.location.href='terminal_index.html'">
      Switch to Terminal Mode
    </button>
  </footer>

  <!-- 1. Include content.js so siteContent is available -->
  <script src="content.js"></script>

  <!-- 2. Main script to populate the page -->
  <script>
    // Once DOM is loaded, populate page from siteContent
    document.addEventListener("DOMContentLoaded", () => {
      const {
        personal,
        social,
        publications,
        projects,
      } = window.siteContent;

      // ==== HERO SECTION ====
      const heroH1 = document.querySelector("#hero h1");
      const heroH5 = document.querySelector("#hero h5");
      const heroSocialLinks = document.querySelector("#hero .social-links");

      heroH1.textContent = personal.name;
      heroH5.textContent = personal.title;

      // Social icons
      const socialIcons = [
        { icon: "fab fa-twitter", link: social.twitter },
        { icon: "fab fa-bluesky", link: social.bluesky },
        { icon: "fab fa-github", link: social.github },
        { icon: "fab fa-linkedin", link: social.linkedin },
      ];

      socialIcons.forEach((item) => {
        const a = document.createElement("a");
        a.href = item.link;
        a.target = "_blank";

        const i = document.createElement("i");
        i.className = item.icon;

        a.appendChild(i);
        heroSocialLinks.appendChild(a);
      });

      // CV link
      const cvLink = document.createElement("a");
      cvLink.href = social.cv;
      cvLink.target = "_blank";
      cvLink.classList.add("cv-button");
      cvLink.textContent = "CV";
      heroSocialLinks.appendChild(cvLink);

      // ==== ABOUT SECTION ====
      const aboutContainer = document.querySelector(".about-content");

      // Current Position
      const positionHeading = document.createElement("h3");
      positionHeading.textContent = "Current Position";
      aboutContainer.appendChild(positionHeading);

      const positionPara = document.createElement("p");
      positionPara.textContent = personal.currentPosition;
      aboutContainer.appendChild(positionPara);

      // Research Focus
      const focusHeading = document.createElement("h3");
      focusHeading.textContent = "Research Focus";
      aboutContainer.appendChild(focusHeading);

      const focusPara = document.createElement("p");
      focusPara.textContent = personal.researchFocus;
      aboutContainer.appendChild(focusPara);

      // Education
      const eduHeading = document.createElement("h3");
      eduHeading.textContent = "Education";
      aboutContainer.appendChild(eduHeading);

      const eduList = document.createElement("ul");
      personal.education.forEach((edu) => {
        const li = document.createElement("li");
        let text = `${edu.degree}, ${edu.institution} (${edu.years})`;
        if (edu.honors) {
          text += `, ${edu.honors}`;
        }
        li.textContent = text;
        eduList.appendChild(li);
      });
      aboutContainer.appendChild(eduList);

      // Teaching Experience
      const teachingHeading = document.createElement("h3");
      teachingHeading.textContent = "Teaching Experience";
      aboutContainer.appendChild(teachingHeading);

      const teachingList = document.createElement("ul");
      personal.teaching.forEach((teaching) => {
        const li = document.createElement("li");
        li.textContent = teaching;
        teachingList.appendChild(li);
      });
      aboutContainer.appendChild(teachingList);

      // Awards
      const awardsHeading = document.createElement("h3");
      awardsHeading.textContent = "Awards and Recognition";
      aboutContainer.appendChild(awardsHeading);

      const awardsList = document.createElement("ul");
      personal.awards.forEach((award) => {
        const li = document.createElement("li");
        li.textContent = award;
        awardsList.appendChild(li);
      });
      aboutContainer.appendChild(awardsList);

      // ==== RESEARCH/PUBLICATIONS SECTION ====
      const pubsContainer = document.querySelector(".publications");
      publications.forEach((pub) => {
        const div = document.createElement("div");
        div.classList.add("publication");

        const h4 = document.createElement("h4");
        h4.textContent = pub.title;
        div.appendChild(h4);

        const p = document.createElement("p");
        p.textContent = pub.conference;
        div.appendChild(p);

        const a = document.createElement("a");
        a.href = pub.link;
        a.target = "_blank";
        a.textContent = "View Paper";
        div.appendChild(a);

        pubsContainer.appendChild(div);
      });

      // ==== CODE/PROJECTS SECTION ====
      const projContainer = document.querySelector(".projects");
      projects.forEach((proj) => {
        const div = document.createElement("div");
        div.classList.add("project");

        const h4 = document.createElement("h4");
        h4.textContent = proj.name;
        div.appendChild(h4);

        const p = document.createElement("p");
        p.textContent = proj.description;
        div.appendChild(p);

        const a = document.createElement("a");
        a.href = proj.link;
        a.target = "_blank";
        a.textContent = "View Project";
        div.appendChild(a);

        projContainer.appendChild(div);
      });

      // ==== CONTACT SECTION ====
      const contactLinks = document.querySelector("#contact .social-links");
      socialIcons.forEach((item) => {
        const a = document.createElement("a");
        a.href = item.link;
        a.target = "_blank";

        const i = document.createElement("i");
        i.className = item.icon;

        a.appendChild(i);
        contactLinks.appendChild(a);
      });
    });

    // THEME TOGGLE
    const themeToggle = document.getElementById("theme-toggle");
    const icon = themeToggle.querySelector("i");

    themeToggle.addEventListener("click", () => {
      document.body.classList.toggle("light-mode");
      icon.classList.toggle("fa-moon");
      icon.classList.toggle("fa-sun");
    });

    // Smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute("href"));
        const headerOffset = 45; // Adjust based on your header height
        const elementPosition = target.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

        window.scrollTo({
          top: offsetPosition,
          behavior: "smooth",
        });
      });
    });
  </script>
</body>
</html>